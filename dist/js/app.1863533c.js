(function(t){function e(e){for(var a,o,r=e[0],l=e[1],c=e[2],u=0,d=[];u<r.length;u++)o=r[u],s[o]&&d.push(s[o][0]),s[o]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);p&&p(e);while(d.length)d.shift()();return n.push.apply(n,c||[]),i()}function i(){for(var t,e=0;e<n.length;e++){for(var i=n[e],a=!0,r=1;r<i.length;r++){var l=i[r];0!==s[l]&&(a=!1)}a&&(n.splice(e--,1),t=o(o.s=i[0]))}return t}var a={},s={1:0},n=[];function o(e){if(a[e])return a[e].exports;var i=a[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=t,o.c=a,o.d=function(t,e,i){o.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},o.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var p=l;n.push([13,0]),i()})({"+cmU":function(t,e,i){},"/DPb":function(t,e,i){},13:function(t,e,i){t.exports=i("Vtdi")},"5Omr":function(t,e,i){"use strict";var a=i("NQdo"),s=i.n(a);s.a},"5PVq":function(t,e,i){"use strict";var a=i("jhlj"),s=i.n(a);s.a},"6aQv":function(t,e,i){"use strict";var a=i("pH7s"),s=i.n(a);s.a},AOPO:function(t,e,i){"use strict";var a=i("AVLG"),s=i.n(a);s.a},AVLG:function(t,e,i){},FYGE:function(t,e,i){"use strict";var a=i("/DPb"),s=i.n(a);s.a},I3fv:function(t,e,i){"use strict";var a=i("+cmU"),s=i.n(a);s.a},NQdo:function(t,e,i){},UokL:function(t,e,i){},Vtdi:function(t,e,i){"use strict";i.r(e);i("VRzm");var a=i("Kw5r"),s=i("XJYT"),n=i.n(s),o=(i("D66Q"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("el-container",[i("el-header",[i("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":t.activeIndex,mode:"horizontal","background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b"},on:{select:t.handleSelect}},[i("el-menu-item",{attrs:{index:"1"}},[i("router-link",{attrs:{to:"/"}},[i("i",{staticClass:"el-icon-menu"}),t._v("首页")])],1),i("el-menu-item",{attrs:{index:"2"}},[i("router-link",{attrs:{to:"/video"}},[i("i",{staticClass:"el-icon-view"}),t._v("观看")])],1),i("el-popover",{attrs:{placement:"top",width:"160"},model:{value:t.showLogin,callback:function(e){t.showLogin=e},expression:"showLogin"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:!t.isLogin,expression:"!isLogin"}],staticClass:"loginGroup"},[i("el-input",{attrs:{placeholder:"账号"},model:{value:t.nameInput,callback:function(e){t.nameInput=e},expression:"nameInput"}}),i("el-input",{attrs:{type:"password",placeholder:"密码"},model:{value:t.passwordInput,callback:function(e){t.passwordInput=e},expression:"passwordInput"}}),i("el-checkbox",{model:{value:t.rememberMe,callback:function(e){t.rememberMe=e},expression:"rememberMe"}},[t._v("记住我")]),i("div",{staticStyle:{"text-align":"right",margin:"0"}},[i("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.showLogin=!1}}},[t._v("取消")]),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.login}},[t._v("确定")])],1)],1),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isLogin,expression:"isLogin"}],staticClass:"loginedGroup"},[i("p",[t._v(" 已登录:"+t._s(t.loginUserName))]),i("div",{staticStyle:{"text-align":"right",margin:"0"}},[i("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.showLogin=!1}}},[t._v("取消")]),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.logout}},[t._v("注销")])],1)]),i("el-button",{attrs:{slot:"reference",type:"primary",icon:"el-icon-setting",circle:""},slot:"reference"})],1)],1)],1),i("el-main",[i("router-view")],1)],1)],1)}),r=[],l=(i("ls82"),i("MECJ")),c=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},p=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"hello"},[i("img",{attrs:{src:"/static/building-space-1.png",alt:""}})])}],u={name:"HelloWorld",props:{msg:String}},d=u,m=(i("6aQv"),i("Yavw"),i("KHd+")),h=Object(m["a"])(d,c,p,!1,null,"a6665a68",null),f=h.exports,g=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"watchVideo Anime"},[i("div",{staticClass:"container"},[i("el-collapse",{staticClass:"dragArea",attrs:{accordion:""},model:{value:t.activeNames,callback:function(e){t.activeNames=e},expression:"activeNames"}},[i("el-collapse-item",{attrs:{title:"请将番剧拖入此处",name:"1"}},[i("el-upload",{staticClass:"upload-demo",attrs:{drag:"",multiple:!1,"auto-upload":!1,"on-change":t.handleChange,action:"/"}},[i("i",{staticClass:"el-icon-upload"}),i("div",{staticClass:"el-upload__text"},[t._v("将番剧拖到此处，或\n            "),i("em",[t._v("点击打开")])])])],1),i("el-collapse-item",{directives:[{name:"show",rawName:"v-show",value:!t.hasInfo,expression:"!hasInfo"}],attrs:{title:"未能正确识别番剧,请手动输入搜索",name:"2"}},[i("div",{staticClass:"search"},[i("el-select",{attrs:{filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入番剧关键词","remote-method":t.remoteMethod,loading:t.loading},model:{value:t.searchBangumisId,callback:function(e){t.searchBangumisId=e},expression:"searchBangumisId"}},t._l(t.searchOption,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),i("el-select",{attrs:{filterable:"",placeholder:"请选择集数"},model:{value:t.watchEpisodeIndex,callback:function(e){t.watchEpisodeIndex=e},expression:"watchEpisodeIndex"}},t._l(t.episodeTotal,function(t){return i("el-option",{key:t,attrs:{label:t,value:t}})}))],1)])],1)],1),""!=t.bangumiName?i("div",{staticClass:"container bangumi-header"},[i("h1",{staticClass:"bangumi-title"},[t._v(t._s(t.bangumiName)+"：第"+t._s(t.episodeIndex)+"集")]),i("div",{staticClass:"re-choose",on:{click:function(e){t.hasInfo=!t.hasInfo}}},[t._v("\n       匹配有误？重新选择\n    ")])]):t._e(),i("div",{staticClass:"playerWrapper playerWrapper-showAnim"},[i("div",{attrs:{id:"dplayer"}},[i("d-player",{ref:"player",attrs:{options:t.playerOpts}})],1)]),i("div",{staticClass:"cm-container"},[i("comment",{attrs:{replies:t.replies,episode_id:t.episodeId,page:t.page},on:{updateRepliesAndPage:t.updateRepliesAndPage}})],1)])},_=[],v=0;function x(t){return j(C(b(t),8*t.length))}function y(t){for(var e,i=v?"0123456789ABCDEF":"0123456789abcdef",a="",s=0;s<t.length;s++)e=t.charCodeAt(s),a+=i.charAt(e>>>4&15)+i.charAt(15&e);return a}function b(t){for(var e=Array(t.length>>2),i=0;i<e.length;i++)e[i]=0;for(i=0;i<8*t.length;i+=8)e[i>>5]|=(255&t.charCodeAt(i/8))<<i%32;return e}function j(t){for(var e="",i=0;i<32*t.length;i+=8)e+=String.fromCharCode(t[i>>5]>>>i%32&255);return e}function C(t,e){t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;for(var i=1732584193,a=-271733879,s=-1732584194,n=271733878,o=0;o<t.length;o+=16){var r=i,l=a,c=s,p=n;i=k(i,a,s,n,t[o+0],7,-680876936),n=k(n,i,a,s,t[o+1],12,-389564586),s=k(s,n,i,a,t[o+2],17,606105819),a=k(a,s,n,i,t[o+3],22,-1044525330),i=k(i,a,s,n,t[o+4],7,-176418897),n=k(n,i,a,s,t[o+5],12,1200080426),s=k(s,n,i,a,t[o+6],17,-1473231341),a=k(a,s,n,i,t[o+7],22,-45705983),i=k(i,a,s,n,t[o+8],7,1770035416),n=k(n,i,a,s,t[o+9],12,-1958414417),s=k(s,n,i,a,t[o+10],17,-42063),a=k(a,s,n,i,t[o+11],22,-1990404162),i=k(i,a,s,n,t[o+12],7,1804603682),n=k(n,i,a,s,t[o+13],12,-40341101),s=k(s,n,i,a,t[o+14],17,-1502002290),a=k(a,s,n,i,t[o+15],22,1236535329),i=I(i,a,s,n,t[o+1],5,-165796510),n=I(n,i,a,s,t[o+6],9,-1069501632),s=I(s,n,i,a,t[o+11],14,643717713),a=I(a,s,n,i,t[o+0],20,-373897302),i=I(i,a,s,n,t[o+5],5,-701558691),n=I(n,i,a,s,t[o+10],9,38016083),s=I(s,n,i,a,t[o+15],14,-660478335),a=I(a,s,n,i,t[o+4],20,-405537848),i=I(i,a,s,n,t[o+9],5,568446438),n=I(n,i,a,s,t[o+14],9,-1019803690),s=I(s,n,i,a,t[o+3],14,-187363961),a=I(a,s,n,i,t[o+8],20,1163531501),i=I(i,a,s,n,t[o+13],5,-1444681467),n=I(n,i,a,s,t[o+2],9,-51403784),s=I(s,n,i,a,t[o+7],14,1735328473),a=I(a,s,n,i,t[o+12],20,-1926607734),i=E(i,a,s,n,t[o+5],4,-378558),n=E(n,i,a,s,t[o+8],11,-2022574463),s=E(s,n,i,a,t[o+11],16,1839030562),a=E(a,s,n,i,t[o+14],23,-35309556),i=E(i,a,s,n,t[o+1],4,-1530992060),n=E(n,i,a,s,t[o+4],11,1272893353),s=E(s,n,i,a,t[o+7],16,-155497632),a=E(a,s,n,i,t[o+10],23,-1094730640),i=E(i,a,s,n,t[o+13],4,681279174),n=E(n,i,a,s,t[o+0],11,-358537222),s=E(s,n,i,a,t[o+3],16,-722521979),a=E(a,s,n,i,t[o+6],23,76029189),i=E(i,a,s,n,t[o+9],4,-640364487),n=E(n,i,a,s,t[o+12],11,-421815835),s=E(s,n,i,a,t[o+15],16,530742520),a=E(a,s,n,i,t[o+2],23,-995338651),i=R(i,a,s,n,t[o+0],6,-198630844),n=R(n,i,a,s,t[o+7],10,1126891415),s=R(s,n,i,a,t[o+14],15,-1416354905),a=R(a,s,n,i,t[o+5],21,-57434055),i=R(i,a,s,n,t[o+12],6,1700485571),n=R(n,i,a,s,t[o+3],10,-1894986606),s=R(s,n,i,a,t[o+10],15,-1051523),a=R(a,s,n,i,t[o+1],21,-2054922799),i=R(i,a,s,n,t[o+8],6,1873313359),n=R(n,i,a,s,t[o+15],10,-30611744),s=R(s,n,i,a,t[o+6],15,-1560198380),a=R(a,s,n,i,t[o+13],21,1309151649),i=R(i,a,s,n,t[o+4],6,-145523070),n=R(n,i,a,s,t[o+11],10,-1120210379),s=R(s,n,i,a,t[o+2],15,718787259),a=R(a,s,n,i,t[o+9],21,-343485551),i=O(i,r),a=O(a,l),s=O(s,c),n=O(n,p)}return Array(i,a,s,n)}function w(t,e,i,a,s,n){return O(S(O(O(e,t),O(a,n)),s),i)}function k(t,e,i,a,s,n,o){return w(e&i|~e&a,t,e,s,n,o)}function I(t,e,i,a,s,n,o){return w(e&a|i&~a,t,e,s,n,o)}function E(t,e,i,a,s,n,o){return w(e^i^a,t,e,s,n,o)}function R(t,e,i,a,s,n,o){return w(i^(e|~a),t,e,s,n,o)}function O(t,e){var i=(65535&t)+(65535&e),a=(t>>16)+(e>>16)+(i>>16);return a<<16|65535&i}function S(t,e){return t<<e|t>>>32-e}var T=function(t,e){var i=this,a="",s=new FileReader,n=new FileReader;this.setBinAndHash=function(t,e){switch(t){case 0:this._binStart=e;break;case 1:this._binEnd=e}this._binStart&&this._binEnd&&this.md5sum(this._binStart,this._binEnd)},this.md5sum=function(t,e){this._hash=y(x(t+e)),a(this._hash)},this.getHash=function(){return this._hash},this.calculateHashOfFile=function(t){s.onload=function(t){i.setBinAndHash(0,t.target.result)},n.onload=function(t){i.setBinAndHash(1,t.target.result)};var e=t.slice(0,65536),a=t.slice(t.size-65536,t.size);s.readAsBinaryString(e),n.readAsBinaryString(a)},this.calculateHashOfFile(t),a=e},P=T,B=i("ce6G"),N=i.n(B),$=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.replies.length>0,expression:"replies.length>0"}],staticClass:"comment-wrapper common"},[i("div",{staticClass:"comment-title b-head"},[i("span",{staticClass:"results"},[t._v(t._s(t.page.totalSize))]),t._v("评论\n  ")]),i("div",{staticClass:"comm",staticStyle:{position:"relative"}},[i("div",{staticClass:"bb-comment "},[i("div",{staticClass:"reply-notice"}),i("div",{staticClass:"comment-header clearfix"},[t._m(0),i("div",{staticClass:"header-page paging-box"},[i("el-pagination",{attrs:{small:"","page-size":t.page.pageSize,"pager-count":11,layout:"prev, pager, next",total:t.page.parentTotalSize},on:{"current-change":t.targetPage,"prev-click":t.prevPage,"next-click":t.nextPage}})],1)]),i("post-reply",{attrs:{is_top:!0,episode_id:t.episode_id},on:{updateRootComment:t.updateRootComment}}),i("div",{staticClass:"comment-list"},t._l(t.replies,function(e,a){return i("root-reply",{key:e.reply.reply.replyId,attrs:{reply_total:t.replies.length,index:a,"replies:":t.replies,reply:e,episode_id:t.episode_id}})})),i("div",{staticClass:"bottom-page paging-box-big"},[i("el-pagination",{attrs:{background:"","page-size":t.page.pageSize,"pager-count":11,layout:"prev, pager, next",total:t.page.parentTotalSize},on:{"current-change":t.targetPage,"prev-click":t.prevPage,"next-click":t.nextPage}})],1),i("post-reply",{attrs:{is_top:!0,episode_id:t.episode_id},on:{updateRootComment:t.updateRootComment}})],1),i("emoji-box")],1)])},A=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"tabs-order"},[i("ul",{staticClass:"clearfix"},[i("li",{staticClass:"on",attrs:{"data-sort":"0"}},[t._v("全部评论")]),i("li",{staticClass:"hot-sort",staticStyle:{display:"list-item"},attrs:{"data-sort":"2"}},[t._v("按热度排序")])])])}],L=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"list-item reply-wrap"},[t._m(0),i("div",{staticClass:"con"},[i("div",{staticClass:"user"},[i("a",{staticClass:"name vip-red-name",attrs:{"data-usercard-mid":"27629197",href:"https://space.bilibili.com/27629197",target:"_blank"}},[t._v(t._s(t.reply.reply.user.nick))]),t._m(1)]),i("p",{staticClass:"text"},[t._v(t._s(t.reply.reply.reply.content))]),i("div",{staticClass:"info"},[i("span",{staticClass:"floor"},[t._v("#"+t._s(t.reply_total-t.index))]),t._m(2),i("span",{staticClass:"time"},[t._v(t._s(new Date(t.reply.reply.reply.createTime).toLocaleString()))]),t._m(3),t._m(4),i("span",{staticClass:"reply btn-hover",on:{click:t.showReplyBox}},[t._v("回复")]),i("operation")],1),i("div",{staticClass:"reply-box"},[t._l(t.view_more?t.reply.replies.slice(0,10):t.reply.replies.slice(0,3),function(e){return i("sub-reply",{key:e.reply.replyId,attrs:{show_reply_box:t.show_reply_box,reply:t.reply,m_reply:e},on:{toggleRB:t.toggleRB}})}),t.reply.reply.totalSize>3&&!t.view_more?i("div",{staticClass:"view-more",on:{click:t.viewMore}},[t._v("共"),i("b",[t._v(t._s(t.reply.reply.totalSize))]),t._v("条回复, "),i("a",{staticClass:"btn-more",attrs:{"data-pid":"809139213"}},[t._v("点击查看")])]):t._e()],2),i("padding-box",{attrs:{sub_replies:t.reply.replies,view_more:t.view_more,root_reply:t.reply},on:{changeSubRepliesPage:t.changeSubRepliesPage}}),t.show_reply_box?i("post-reply",{attrs:{show_reply_box:t.show_reply_box,episode_id:t.episode_id,reply_info:t.replyInfo},on:{updateSubComment:t.updateSubComment,postReplySuccess:t.postReplySuccess}}):t._e()],1)])},U=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"user-face"},[i("a",{attrs:{href:"https://space.bilibili.com/27629197",target:"_blank","data-usercard-mid":"27629197"}},[i("img",{attrs:{src:"https://i1.hdslb.com/bfs/face/14686527d8d715e986ddd29a208775a29a0030c8.jpg@52w_52h.webp",alt:""}})]),i("a",{staticClass:"pendant",attrs:{href:"https://space.bilibili.com/27629197","data-usercard-mid":"27629197",target:"_blank"}},[i("img",{attrs:{src:"https://i1.hdslb.com/bfs/face/1cdf174c75dd6493f3c8f0797e972b69e3293870.png@86w_86h.webp"}})]),i("div",{staticClass:"hot-follow"})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("a",{attrs:{href:"https://www.bilibili.com/blackboard/help.html#%E4%BC%9A%E5%91%98%E7%AD%89%E7%BA%A7%E7%9B%B8%E5%85%B3",target:"_blank"}},[i("i",{staticClass:"level l4"})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",{staticClass:"plad"},[t._v("来自"),i("a",{attrs:{href:"//app.bilibili.com/",target:"_blank"}},[t._v("安卓客户端")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",{staticClass:"like "},[i("i"),i("span",[t._v("233")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",{staticClass:"hate "},[i("i")])}],z=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"reply-item reply-wrap"},[t._m(0),i("div",{staticClass:"reply-con"},[i("div",{staticClass:"user"},[i("a",{staticClass:"name vip-red-name",attrs:{href:"https://space.bilibili.com/21913953",target:"_blank","data-usercard-mid":"21913953"}},[t._v(t._s(t.m_reply.user.nick))]),t._m(1),i("span",{staticClass:"text-con"},[t._v(t._s(t.m_reply.reply.content))])]),i("div",{staticClass:"info"},[i("span",{staticClass:"time"},[t._v(t._s(new Date(t.m_reply.reply.modifyTime).toLocaleString()))]),t._m(2),i("span",{staticClass:"reply btn-hover",on:{click:t.showReplyBox}},[t._v("回复")]),i("operation")],1)])])},D=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("a",{staticClass:"reply-face",attrs:{href:"https://space.bilibili.com/21913953","data-usercard-mid":"21913953",target:"_blank"}},[i("img",{attrs:{src:"https://i1.hdslb.com/bfs/face/01780d7c1323dbadd819992d9f5cabc44deb771f.jpg@52w_52h.webp",alt:""}})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("a",{attrs:{href:"https://www.bilibili.com/blackboard/help.html#%E4%BC%9A%E5%91%98%E7%AD%89%E7%BA%A7%E7%9B%B8%E5%85%B3",target:"_blank"}},[i("i",{staticClass:"level l4"})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",{staticClass:"like "},[i("i"),i("span",[t._v("274")])])}],F=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"operation"},[i("div",{staticClass:"spot",attrs:{tabindex:"4"},on:{focus:t.showOper,blur:t.closeOper}}),i("div",{staticClass:"opera-list",style:t.displayOper},[t._m(0)])])},V=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ul",[i("li",{staticClass:"blacklist"},[t._v("加入黑名单")]),i("li",{staticClass:"report"},[t._v("举报")])])}],M={data:function(){return{displayOper:{display:"none"}}},methods:{showOper:function(){this.tap("displatOper!"),this.displayOper.display="block"},closeOper:function(){this.tap("closeOper!"),this.displayOper.display="none"}}},W=M,H=(i("zUbT"),Object(m["a"])(W,F,V,!1,null,null,null)),K=H.exports,J={props:["m_reply","reply"],data:function(){return{replyInfo:{nick:"",p_uid:"",p_rid:"",is_parent:0,prefix:""}}},components:{operation:K},methods:{showReplyBox:function(){this.tap("setInfo from SubRply!"),this.replyInfo.nick=this.m_reply.user.nick,this.replyInfo.p_uid=this.m_reply.user.uid,this.replyInfo.p_rid=this.m_reply.reply.parentId,this.replyInfo.prefix="回复 @"+this.m_reply.user.nick+" :",this.tap("reply nick: "+this.replyInfo.nick),this.tap("reply p_uid: "+this.replyInfo.p_uid),this.tap("reply p_rid: "+this.replyInfo.p_rid),this.tap("reply prefix: "+this.replyInfo.prefix),this.$emit("toggleRB",this.replyInfo)}}},Y=J,G=(i("AOPO"),Object(m["a"])(Y,z,D,!1,null,null,null)),Q=G.exports,Z=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"paging-box"},[t.view_more?i("el-pagination",{attrs:{small:"","page-size":10,"pager-count":11,layout:"prev, pager, next",total:t.root_reply.reply.totalSize},on:{"current-change":t.targetPageSub,"prev-click":t.prevPageSub,"next-click":t.nextPageSub}}):t._e()],1)},q=[],X=i("vDqi"),tt=i.n(X);tt.a.interceptors.request.use(function(t){return localStorage.JWT_TOKEN&&(t.headers.Authorization="".concat(localStorage.JWT_TOKEN)),t},function(t){return Promise.reject(t)}),tt.a.interceptors.response.use(function(t){return t},function(t){if(t&&t.response){switch(t.response.status){case 403:t.message=t.response.data.msg;break;case 404:t.message="请求地址出错: ".concat(t.response.config.url);break;case 408:t.message="请求超时";break;case 500:t.message="服务器内部错误";break;default:t.message=t.response.data.msg;break}a["default"].prototype.$message({message:t.message,type:"error"})}return Promise.reject(t)});var et="",it=function(t){return tt.a.post("".concat(et,"/auth/login"),t)},at=function(){return tt.a.get("".concat(et,"/auth/logout"))},st=function(t){return tt.a.get("".concat(et,"/tokens"),t)},nt=function(t,e){return tt.a.get("".concat(et,"/videos/").concat(t,"/").concat(e))},ot=function(t,e){return tt.a.get("".concat(et,"/episodes"),{params:{bangumiId:t,epIndex:e}})},rt=function(t){return tt.a.get("".concat(et,"/bangumis"),{params:{bangumiName:t}})},lt=function(t){return tt.a.get("".concat(et,"/replies"),{params:{epId:t}})},ct=function(t,e){return tt.a.get("".concat(et,"/replies"),{params:{epId:t,pn:e}})},pt=function(t,e){return tt.a.get("".concat(et,"/replies/son"),{params:{prid:t,pn:e}})},ut=function(t){return tt.a.post("".concat(et,"/replies"),t)},dt={login:it,logout:at,checkToken:st,getVideosInfo:nt,getDanmakujiIdByBangumisIdAndepIndex:ot,getsearchBangumisIdResult:rt,getRepliesByEpId:lt,getRepliesByEpIdAndPageNum:ct,addReply:ut,getSubReplies:pt},mt={props:["sub_replies","root_reply","view_more"],data:function(){return{curPage:1}},methods:{loadSubReplies:function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(e,i){var a,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.tap("load subReplies, prid:"+e+" pn:"+i),t.next=3,dt.getSubReplies(e,i);case 3:return a=t.sent,s=a.data,t.abrupt("return",s);case 6:case"end":return t.stop()}},t,this)}));return function(e,i){return t.apply(this,arguments)}}(),targetPageSub:function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(e){var i,a,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.tap("targer page sub invoked!"),this.curPage=e,i=this.root_reply.reply.reply.replyId,t.next=5,this.loadSubReplies(i,e);case 5:a=t.sent,s=a.data.replies,this.$emit("changeSubRepliesPage",s);case 8:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),prevPageSub:function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(){var e,i,a,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.tap("prevPageSub invoked!"),e=this.root_reply.reply.reply.replyId,this.curPage=this.curPage-1,i=this.curPage,t.next=6,this.loadSubReplies(e,i);case 6:a=t.sent,s=a.data.replies,this.$emit("changeSubRepliesPage",s);case 9:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),nextPageSub:function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(){var e,i,a,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.tap("nextPageSub invoked!"),e=this.root_reply.reply.reply.replyId,this.curPage=this.curPage+1,i=this.curPage,t.next=6,this.loadSubReplies(e,i);case 6:a=t.sent,s=a.data.replies,this.$emit("changeSubRepliesPage",s);case 9:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}},ht=mt,ft=(i("5PVq"),Object(m["a"])(ht,Z,q,!1,null,null,null)),gt=ft.exports,_t=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"comment-send"},[t._m(0),i("div",{staticClass:"textarea-container",class:{focus:t.activeFocus}},[i("i",{staticClass:"ipt-arrow"}),i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],staticClass:"ipt-txt",attrs:{cols:"80",name:"msg",rows:"5",placeholder:t.getReplyUser},domProps:{value:t.content},on:{focus:t.addFocusClass,blur:t.removeFocusClass,input:function(e){e.target.composing||(t.content=e.target.value)}}}),i("button",{staticClass:"comment-submit",attrs:{"data-rid":"797290060","data-pid":"797344362"},on:{click:t.postComment}},[t._v("发表评论")])]),i("div",{ref:"mybox",staticClass:"comment-emoji",attrs:{tabindex:"1"},on:{blur:t.hideEmojiBox,click:t.getClickPoint}},[i("i",{staticClass:"face"}),i("span",{staticClass:"text"},[t._v("表情")])])])},vt=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"user-face"},[i("img",{staticClass:"user-head",attrs:{src:"https://i2.hdslb.com/bfs/face/900fa502da798fb1b3947a078783cbbf9405660e.jpg@52w_52h.webp"}})])}],xt=new a["default"],yt={props:["replies","m_replies","episode_id","reply_info","show_reply_box","is_top"],data:function(){return{content:"",r_page:1,is_parent:1,p_uid:"",p_rid:"",pos_x:0,pos_y:0,activeFocus:!1}},methods:{getElementAbsPos:function(t){var e=t.offsetTop,i=t.offsetLeft;while(t=t.offsetParent)e+=t.offsetTop,i+=t.offsetLeft;return{left:i,top:e}},getClickPoint:function(t){var e=this.getElementAbsPos(this.$refs.mybox);this.pos_x=e.left-100,this.pos_y=e.top-760,this.tap("absolute: x:"+this.pos_x+" y:"+this.pos_y),xt.$emit("changeEmojiPos","block",this.pos_x+"px",this.pos_y+"px",this.is_top)},hideEmojiBox:function(){this.tap("onblur tigger!"),xt.$emit("hideEmojiBox")},addFocusClass:function(){this.tap("add focus"),this.activeFocus=!0},removeFocusClass:function(){this.tap("remove focus"),this.activeFocus=!1},postComment:function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(){var e,i,a,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e={uid:localStorage.getItem("USER_ID"),ep_id:this.episode_id,content:this.content,r_page:1,is_parent:1,p_uid:"",p_rid:""},this.reply_info&&(e.p_uid=this.reply_info.p_uid,e.p_rid=this.reply_info.p_rid,e.is_parent=this.reply_info.is_parent,e.content=this.reply_info.prefix+e.content),this.tap("get_uid:"+e.uid),this.tap("get_ep_id:"+e.ep_id),this.tap("get_p_uid:"+e.p_uid),this.tap("get_p_rid:"+e.p_rid),this.tap("get_is_parent:"+e.is_parent),this.tap("get reply content: "+e.content),t.next=10,dt.addReply(e);case 10:i=t.sent,a=i.data,this.tap(i),this.tap(i.status),this.tap(a),0===a.code?(this.content="",this.tap("post success"),this.reply_info&&(this.tap("has_reply_info and post success"),this.$emit("postReplySuccess")),s=a.data,1===e.is_parent?(this.tap("update RootComment!"),this.$emit("updateRootComment",s)):(this.tap("update SubComment!"),this.$emit("updateSubComment",s))):this.tap("发送评论失败");case 16:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},computed:{getReplyUser:function(){return this.reply_info?"回复@"+this.reply_info.nick:"请自觉遵守互联网相关的政策法规，严禁发布色情、暴力、反动的言论。"}},mounted:function(){var t=this;xt.$on("selectedEmoji",function(e,i){t.content=t.content+e,t.show_reply_box||t.is_top||(t.content=""),t.is_top&&!i&&(t.tap("clean top reply content"),t.content=""),t.tap("get selected emoji: "+e)})}},bt=yt,jt=(i("FYGE"),Object(m["a"])(bt,_t,vt,!1,null,null,null)),Ct=jt.exports,wt={props:["reply","replies","episode_id","page","index","reply_total"],data:function(){return{reply_root:!1,show_reply_box:!1,replyInfo:{nick:"",p_uid:"",p_rid:"",is_parent:1,prefix:""},view_more:!1}},components:{"sub-reply":Q,"padding-box":gt,operation:K,"post-reply":Ct},methods:{showReplyBox:function(){this.replyInfo.nick=this.reply.reply.user.nick,this.replyInfo.p_uid=this.reply.reply.user.uid,this.replyInfo.p_rid=this.reply.reply.reply.replyId,this.tap("reply root!"),this.tap("nick:"+this.replyInfo.nick),this.tap("p_uid:"+this.replyInfo.p_uid),this.tap("p_rid:"+this.replyInfo.p_rid),this.tap("prefix:"+this.replyInfo.prefix),this.replyInfo.is_parent=0,this.replyInfo.prefix="",this.reply_root?this.show_reply_box=!this.show_reply_box:this.show_reply_box=!0,this.reply_root=!0},toggleRB:function(t){this.tap("toggle reply box!"),this.replyInfo=t,this.tap("set info!"),this.show_reply_box=!0,this.reply_root=!1},postReplySuccess:function(){this.show_reply_box=!1,this.tap("post reply success")},updateSubComment:function(t){this.tap("updateSubComment invoked!"),this.reply.replies.push(t)},viewMore:function(){this.view_more=!0,this.tap("view_more: "+this.view_more)},changeSubRepliesPage:function(t){this.tap("changeSubRepliesPage"),this.tap("sub_replies:"+t),this.reply.replies=t}}},kt=wt,It=(i("lmhV"),Object(m["a"])(kt,L,U,!1,null,null,null)),Et=It.exports,Rt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"emoji-box",style:t.styleObj,attrs:{tabindex:"2"},on:{blur:t.hideEmoojiBoxtest,focus:t.showEmojiBox}},[t._m(0),i("div",{staticClass:"emoji-wrap"},[i("a",{staticClass:"emoji-list emoji-text",attrs:{"data-emoji-text":"(⌒▽⌒)"},on:{click:function(e){t.addEmojiToCtx(e)}}},[t._v("(⌒▽⌒)")]),i("a",{staticClass:"emoji-list emoji-text",attrs:{"data-emoji-text":"（￣▽￣）"},on:{click:function(e){t.addEmojiToCtx(e)}}},[t._v("（￣▽￣）")]),i("a",{staticClass:"emoji-list emoji-text",attrs:{"data-emoji-text":"(=・ω・=)"},on:{click:function(e){t.addEmojiToCtx(e)}}},[t._v("(=・ω・=)")]),i("a",{staticClass:"emoji-list emoji-text",attrs:{"data-emoji-text":"(｀・ω・´)"},on:{click:function(e){t.addEmojiToCtx(e)}}},[t._v("(｀・ω・´)")]),i("a",{staticClass:"emoji-list emoji-text",attrs:{"data-emoji-text":"(〜￣△￣)〜"},on:{click:function(e){t.addEmojiToCtx(e)}}},[t._v("(〜￣△￣)〜")]),i("a",{staticClass:"emoji-list emoji-text",attrs:{"data-emoji-text":"(･∀･)"},on:{click:function(e){t.addEmojiToCtx(e)}}},[t._v("(･∀･)")]),i("a",{staticClass:"emoji-list emoji-text",attrs:{"data-emoji-text":"(°∀°)ﾉ"},on:{click:function(e){t.addEmojiToCtx(e)}}},[t._v("(°∀°)ﾉ")]),i("a",{staticClass:"emoji-list emoji-text",attrs:{"data-emoji-text":"(￣3￣)"},on:{click:function(e){t.addEmojiToCtx(e)}}},[t._v("(￣3￣)")]),i("a",{staticClass:"emoji-list emoji-text",attrs:{"data-emoji-text":"╮(￣▽￣)╭"},on:{click:function(e){t.addEmojiToCtx(e)}}},[t._v("╮(￣▽￣)╭")]),i("a",{staticClass:"emoji-list emoji-text",attrs:{"data-emoji-text":"( ´_ゝ｀)"},on:{click:function(e){t.addEmojiToCtx(e)}}},[t._v("( ´_ゝ｀)")]),i("a",{staticClass:"emoji-list emoji-text",attrs:{"data-emoji-text":"←_←"},on:{click:function(e){t.addEmojiToCtx(e)}}},[t._v("←_←")]),i("a",{staticClass:"emoji-list emoji-text",attrs:{"data-emoji-text":"→_→"},on:{click:function(e){t.addEmojiToCtx(e)}}},[t._v("→_→")]),i("a",{staticClass:"emoji-list emoji-text",attrs:{"data-emoji-text":"(<_<)"},on:{click:function(e){t.addEmojiToCtx(e)}}},[t._v("(<_<)")]),i("a",{staticClass:"emoji-list emoji-text",attrs:{"data-emoji-text":"(>_>)"},on:{click:function(e){t.addEmojiToCtx(e)}}},[t._v("(>_>)")]),i("a",{staticClass:"emoji-list emoji-text",attrs:{"data-emoji-text":"(;¬_¬)"},on:{click:function(e){t.addEmojiToCtx(e)}}},[t._v("(;¬_¬)")]),i("a",{staticClass:"emoji-list emoji-text",attrs:{"data-emoji-text":'("▔□▔)/'},on:{click:function(e){t.addEmojiToCtx(e)}}},[t._v('("▔□▔)/')]),i("a",{staticClass:"emoji-list emoji-text",attrs:{"data-emoji-text":"(ﾟДﾟ≡ﾟдﾟ)!?"},on:{click:function(e){t.addEmojiToCtx(e)}}},[t._v("(ﾟДﾟ≡ﾟдﾟ)!?")]),i("a",{staticClass:"emoji-list emoji-text",attrs:{"data-emoji-text":"Σ(ﾟдﾟ;)"},on:{click:function(e){t.addEmojiToCtx(e)}}},[t._v("Σ(ﾟдﾟ;)")]),i("a",{staticClass:"emoji-list emoji-text",attrs:{"data-emoji-text":"Σ( ￣□￣||)"},on:{click:function(e){t.addEmojiToCtx(e)}}},[t._v("Σ( ￣□￣||)")]),i("a",{staticClass:"emoji-list emoji-text",attrs:{"data-emoji-text":"(´；ω；`)"},on:{click:function(e){t.addEmojiToCtx(e)}}},[t._v("(´；ω；`)")]),i("a",{staticClass:"emoji-list emoji-text",attrs:{"data-emoji-text":"（/TДT)/"},on:{click:function(e){t.addEmojiToCtx(e)}}},[t._v("（/TДT)/")]),i("a",{staticClass:"emoji-list emoji-text",attrs:{"data-emoji-text":"(^・ω・^ )"},on:{click:function(e){t.addEmojiToCtx(e)}}},[t._v("(^・ω・^ )")]),i("a",{staticClass:"emoji-list emoji-text",attrs:{"data-emoji-text":"(｡･ω･｡)"},on:{click:function(e){t.addEmojiToCtx(e)}}},[t._v("(｡･ω･｡)")]),i("a",{staticClass:"emoji-list emoji-text",attrs:{"data-emoji-text":"(●￣(ｴ)￣●)"},on:{click:function(e){t.addEmojiToCtx(e)}}},[t._v("(●￣(ｴ)￣●)")]),i("a",{staticClass:"emoji-list emoji-text",attrs:{"data-emoji-text":"ε=ε=(ノ≧∇≦)ノ"},on:{click:function(e){t.addEmojiToCtx(e)}}},[t._v("ε=ε=(ノ≧∇≦)ノ")]),i("a",{staticClass:"emoji-list emoji-text",attrs:{"data-emoji-text":"(´･_･`)"},on:{click:function(e){t.addEmojiToCtx(e)}}},[t._v("(´･_･`)")]),i("a",{staticClass:"emoji-list emoji-text",attrs:{"data-emoji-text":"(-_-#)"},on:{click:function(e){t.addEmojiToCtx(e)}}},[t._v("(-_-#)")]),i("a",{staticClass:"emoji-list emoji-text",attrs:{"data-emoji-text":"（￣へ￣）"},on:{click:function(e){t.addEmojiToCtx(e)}}},[t._v("（￣へ￣）")]),i("a",{staticClass:"emoji-list emoji-text",attrs:{"data-emoji-text":"(￣ε(#￣) Σ"},on:{click:function(e){t.addEmojiToCtx(e)}}},[t._v("(￣ε(#￣) Σ")]),i("a",{staticClass:"emoji-list emoji-text",attrs:{"data-emoji-text":"ヽ(`Д´)ﾉ"},on:{click:function(e){t.addEmojiToCtx(e)}}},[t._v("ヽ(`Д´)ﾉ")]),i("a",{staticClass:"emoji-list emoji-text",attrs:{"data-emoji-text":"(╯°口°)╯(┴—┴"},on:{click:function(e){t.addEmojiToCtx(e)}}},[t._v("(╯°口°)╯(┴—┴")]),i("a",{staticClass:"emoji-list emoji-text",attrs:{"data-emoji-text":"（#-_-)┯━┯"},on:{click:function(e){t.addEmojiToCtx(e)}}},[t._v("（#-_-)┯━┯")]),i("a",{staticClass:"emoji-list emoji-text",attrs:{"data-emoji-text":"_(:3」∠)_"},on:{click:function(e){t.addEmojiToCtx(e)}}},[t._v("_(:3」∠)_")]),i("a",{staticClass:"emoji-list emoji-text",attrs:{"data-emoji-text":"(笑)"},on:{click:function(e){t.addEmojiToCtx(e)}}},[t._v("(笑)")]),i("a",{staticClass:"emoji-list emoji-text",attrs:{"data-emoji-text":"(汗)"},on:{click:function(e){t.addEmojiToCtx(e)}}},[t._v("(汗)")]),i("a",{staticClass:"emoji-list emoji-text",attrs:{"data-emoji-text":"(泣)"},on:{click:function(e){t.addEmojiToCtx(e)}}},[t._v("(泣)")]),i("a",{staticClass:"emoji-list emoji-text",attrs:{"data-emoji-text":"(苦笑)"},on:{click:function(e){t.addEmojiToCtx(e)}}},[t._v("(苦笑)")])])])},Ot=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"emoji-title"},[i("span",[t._v("颜文字")])])}],St={data:function(){return{styleObj:{display:"none",left:"100px",top:"100px"},is_top:!0}},methods:{hideEmoojiBoxtest:function(){this.tap("hide box test!"),this.styleObj.display="none"},showEmojiBox:function(){this.tap("show box!"),this.styleObj.display="block"},addEmojiToCtx:function(t){var e=t.target.getAttribute("data-emoji-text");this.tap("emoji:"+e),this.styleObj.display="none",this.tap("is_top:"+this.is_top),xt.$emit("selectedEmoji",e,this.is_top)}},mounted:function(){var t=this;xt.$on("changeEmojiPos",function(e,i,a,s){t.styleObj.display=e,t.styleObj.left=i,t.styleObj.top=a,t.is_top=s,t.tap("display:"+t.styleObj.display+" posx:"+t.styleObj.left+" posy:"+t.styleObj.top),t.tap("changed pos!")}),xt.$on("hideEmojiBox",function(){t.styleObj.display="none",t.tap("post hideBox")})}},Tt=St,Pt=(i("I3fv"),Object(m["a"])(Tt,Rt,Ot,!1,null,null,null)),Bt=Pt.exports,Nt={props:["replies","episode_id","page"],data:function(){return{}},components:{"root-reply":Et,"post-reply":Ct,"emoji-box":Bt},methods:{updateRootComment:function(t){this.tap("updateRootComment invoked!"),this.replies.unshift(t),this.tap("replies.length:"+this.replies.length)},loadData:function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(e,i){var a,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,dt.getRepliesByEpIdAndPageNum(e,i);case 2:return a=t.sent,s=a.data,this.tap("epdi: "+e+" curPage: "+i+" resData:"+s),t.abrupt("return",s);case 6:case"end":return t.stop()}},t,this)}));return function(e,i){return t.apply(this,arguments)}}(),nextPage:function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(){var e,i,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.loadData(this.episode_id,this.page.pageNumber+1);case 2:e=t.sent,i=e.data.page,a=e.data.replies,this.$emit("updateRepliesAndPage",a,i),this.tap("nextPage invoked!");case 7:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),prevPage:function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(){var e,i,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.loadData(this.episode_id,this.page.pageNumber-1);case 2:e=t.sent,i=e.data.page,a=e.data.replies,this.$emit("updateRepliesAndPage",a,i),this.tap("nextPage invoked!");case 7:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),targetPage:function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(e){var i,a,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.loadData(this.episode_id,e);case 2:i=t.sent,a=i.data.page,s=i.data.replies,this.$emit("updateRepliesAndPage",s,a),this.tap("nextPage invoked!");case 7:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}},$t=Nt,At=(i("sWhz"),Object(m["a"])($t,$,A,!1,null,null,null)),Lt=At.exports,Ut=(i("g6xY"),{data:function(){var t=this;return{episodeId:"",episodeIndex:"",watchEpisodeIndex:"",episodeTotal:0,searchOption:[],searchBangumisId:[],bangumiName:"",list:[],replies:[],page:"",loading:!1,states:[],hasInfo:!0,searchInput:"",activeNames:["1"],videoInput:"",videoURL:"",playerOpts:{autoplay:!0,theme:"#FADFA3",lang:"zh-cn",screenshot:!0,hotkey:!0,preload:"auto",volume:.7,mutex:!0,video:{url:this.videoURL,pic:"/static/placeholder.png",type:"auto"},danmaku:{id:"9E2E3368B56CDBB4",api:"https://api.prprpr.me/dplayer/",token:"tokendemo",maximum:1e3,addition:["https://api.prprpr.me/dplayer/bilibili?aid=4157142"],user:"Father",bottom:"15%",unlimited:!0},contextmenu:[{text:"custom1",link:"https://github.com/DIYgod/DPlayer"},{text:"custom2",click:function(e){t.tap(e)}}]}}},components:{"d-player":N.a,"post-reply":Ct,comment:Lt},watch:{searchBangumisId:function(t){var e=this.states.filter(function(e){return e.bangumiId==t});0==e.length?this.episodeTotal=0:this.episodeTotal=e[0].episodeTotal},watchEpisodeIndex:function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(e){var i,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,dt.getDanmakujiIdByBangumisIdAndepIndex(this.searchBangumisId,e);case 2:i=t.sent,this.tap(i),a=i.data.data.danmakuId,this.switchVideo(this.videoURL,a),this.watchEpisodeIndex=i.data.data.episodeIndex,this.episodeId=i.data.data.episodeId,this.bangumiName=i.data.data.bangumiName,this.hasInfo=!0,this.initComments();case 11:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},methods:{play:function(){this.tap("play callback"),this.tap(this.videoURL)},getFileMd5:function(t){return new Promise(function(e,i){try{new P(t,function(t){e(t)})}catch(t){i(t)}})},handleChange:function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(e){var i,a,s,n,o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.videoURL=e.url,t.next=3,this.getFileMd5(e.raw);case 3:return i=t.sent,a=e.size,this.tap(i),this.tap(a),this.switchVideo(this.videoURL,""),this.tap("寻找弹幕资源"),t.next=11,dt.getVideosInfo(a,i);case 11:s=t.sent.data,this.tap("结束寻找弹幕资源"),this.tap("episode data:"+s),n=s.data,this.tap("videoInfo: "+n),"0"===s.code||"OK"===s.msg?(o=n.danmakuId,this.switchVideo(this.videoURL,o),this.bangumiName=n.bangumiName,this.episodeIndex=n.episodeIndex,this.episodeId=n.episodeId,this.tap("setEpId in:"+n.episodeId),this.initComments(),this.tap("bangumiName:"+this.bangumiName),this.tap("episodeIndex:"+this.episodeIndex)):(this.hasInfo=!1,this.activeNames=["2"],this.bangumiName="",this.episodeIndex="",this.episodeId="",this.replies=[]);case 17:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),switchVideo:function(t,e){var i=this.$refs.player.dp;i.switchVideo({url:this.videoURL},{id:e,api:"http://10.0.46.20:8080/dplayer/",token:localStorage.getItem("JWT_TOKEN"),maximum:1e3,user:localStorage.getItem("loginUserName"),bottom:"15%",unlimited:!0})},remoteMethod:function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(e){var i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(""===e){t.next=10;break}return this.loading=!0,this.tap(e),t.next=5,dt.getsearchBangumisIdResult(e);case 5:i=t.sent.data,this.loading=!1,"0"!==i.code&&"OK"!==i.msg||(this.states=i.data,this.list=this.states.map(function(t){return{value:t.bangumiId,label:t.bangumiName}}),this.searchOption=this.list.filter(function(t){return t.label.toLowerCase().indexOf(e.toLowerCase())>-1})),t.next=11;break;case 10:this.searchOption=[];case 11:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),initComments:function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.tap("episodeId:"+this.episodeId),t.next=3,dt.getRepliesByEpId(this.episodeId);case 3:e=t.sent.data,this.tap(e),"0"!==e.code&&"OK"!==e.msg||(this.tap("get replies:"),this.tap(e.data.replies),this.tap("get page:"),this.tap(e.data.page),this.replies=e.data.replies,this.page=e.data.page);case 7:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),updateRepliesAndPage:function(t,e){this.replies=t,this.page=e,this.tap("updateRepliesAndPage passed success!")}},mounted:function(){setTimeout(function(){document.getElementsByClassName("watchVideo")[0].setAttribute("class","watchVideo")},1e3)}}),zt=Ut,Dt=(i("5Omr"),Object(m["a"])(zt,g,_,!1,null,null,null)),Ft=Dt.exports,Vt={name:"app",components:{HelloWorld:f,WatchVideo:Ft},data:function(){return{showLogin:!1,nameInput:"",passwordInput:"",rememberMe:!1,activeIndex:"1",isLogin:!1,loginUserName:"",uid:""}},methods:{handleSelect:function(t,e){this.tap(t,e)},login:function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(){var e,i,a,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(e={principal:this.nameInput,password:this.passwordInput,remember_me:this.rememberMe?1:0},""!=e.principal&&""!=e.password){t.next=4;break}return this.$message({message:"账号或密码为空",type:"info"}),t.abrupt("return",!1);case 4:return t.next=6,dt.login(e);case 6:if(i=t.sent,a=i.data,s="",2002!==a.code&&null!=a.data){t.next=12;break}return this.$message({message:"账号不存在或密码错误",type:"error"}),t.abrupt("return",!1);case 12:0!==a.code&&"OK"!==a.msg||(s=a.data.token,this.isLogin=!0,this.loginUserName=e.principal,this.tap("login return data:"+a.data),this.uid=a.data.user.uid,this.tap("uid:"+this.uid),s||this.$message({message:"无法获取到Token",type:"error"})),this.checkLocalStorage()&&(localStorage.setItem("USER_ID",this.uid),localStorage.setItem("JWT_TOKEN",s),localStorage.setItem("loginUserName",this.loginUserName));case 14:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),checkLocalStorage:function(){return"undefined"!==typeof window.localStorage||(this.$message({message:"请关闭隐私模式,或者浏览器太老旧了,否则无法保存登录状态",type:"warning"}),!1)},logout:function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,dt.logout();case 2:e=t.sent,0!==e.data.code&&"登出成功"!==e.data.msg||(this.isLogin=!1,localStorage.setItem("JWT_TOKEN",""),localStorage.setItem("loginUserName",""),localStorage.setItem("USER_ID",""));case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},mounted:function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(){var e,i,a,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!this.checkLocalStorage()){t.next=12;break}if(e=localStorage.getItem("loginUserName"),i=localStorage.getItem("JWT_TOKEN"),a=localStorage.getItem("USER_ID"),this.tap("check userid: "+a),null!=i&&""!=i){t.next=7;break}return t.abrupt("return");case 7:return t.next=9,dt.checkToken(i);case 9:s=t.sent,this.tap(s.data),0!==s.data.code&&"ojbk"!==s.data.msg||(this.isLogin=!0,this.loginUserName=e);case 12:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},Mt=Vt,Wt=(i("ZL7j"),Object(m["a"])(Mt,o,r,!1,null,null,null)),Ht=Wt.exports,Kt=i("jE9Z");a["default"].use(Kt["a"]);var Jt=[{path:"/",name:"HelloWorld",component:f},{path:"/video",name:"video",component:Ft}],Yt=new Kt["a"]({routes:Jt}),Gt=Yt;a["default"].config.productionTip=!1,a["default"].use(n.a),a["default"].prototype.tap=function(t){return console.log(t),t},new a["default"]({render:function(t){return t(Ht)},router:Gt}).$mount("#app")},Yavw:function(t,e,i){"use strict";var a=i("lRNN"),s=i.n(a);s.a},ZL7j:function(t,e,i){"use strict";var a=i("bP1M"),s=i.n(a);s.a},bP1M:function(t,e,i){},g6xY:function(t,e,i){},jhlj:function(t,e,i){},kYI5:function(t,e,i){},lRNN:function(t,e,i){},lmhV:function(t,e,i){"use strict";var a=i("kYI5"),s=i.n(a);s.a},lxyZ:function(t,e,i){},pH7s:function(t,e,i){},sWhz:function(t,e,i){"use strict";var a=i("lxyZ"),s=i.n(a);s.a},zUbT:function(t,e,i){"use strict";var a=i("UokL"),s=i.n(a);s.a}});
//# sourceMappingURL=app.1863533c.js.map